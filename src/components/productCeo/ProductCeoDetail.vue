<template>
  <div class="all">
    <div v-if="product" class="product-container">
      <div class="product-image">
        <img :src="productImageSrc" alt="Product Image" />
      </div>
      <div class="product-info">
        <div class="storeName">
          <h1>{{ product.storeName }}</h1>
        </div>
        <div class="productName">
          <p>{{ product.productName }}</p>
        </div>
        <div class="phoneNumber">
          <p>ì „í™”ë²ˆí˜¸ : {{ product.phoneNumber }}</p>
        </div>
        <div class="price">
          <p>{{ product.price }} ì›</p>
        </div>
        <div class="contents">
          <p>ìƒì„¸ ì„¤ëª… : {{ product.contents }}</p>
        </div>
        <div class="product-button">
          <button @click="updateProduct">ìˆ˜ì •</button>
          <button @click="deleteProduct">ì‚­ì œ</button>
          <button @click="goToReservation">ì˜ˆì•½í•˜ê¸°</button>
        </div>
      </div>
    </div>
    <div v-else>
      <p>ìƒí’ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
    </div>
  </div>

  <!-- ë¦¬ë·° -->

  <div class="review1">
    <div class="header1">
      <p>ê³ ê° í›„ê¸° 452 ê°œ</p>
      <div class="rating1">
        <div class="stars1">
          <!-- <div class="starsimg1"> -->
          <img class="starsimg1" src="/static/images/common/star_1.png" />
          <img class="starsimg1" src="/static/images/common/star_1.png" />
          <img class="starsimg1" src="/static/images/common/star_1.png" />
          <img class="starsimg1" src="/static/images/common/star_1.png" />
          <img class="starsimg1" src="/static/images/common/star_1.png" />
          <!-- </div> -->
          <!-- <p class="startsp1">5.0</p> -->
        </div>
      </div>
      <!-- <div class="images1">
            <div class="image1">
                <img class="imageimg1" src="https://wayo.cdn.ntruss.com/resized/review/1dd354fc64db425aa78828ab9d4c08d7.jpg">
            </div>
            <div class="image1">
                <img class="imageimg1" src="https://wayo.cdn.ntruss.com/resized/review/3f567c1accff4a12a149fcd447e11361.JPEG">
            </div>
            <div class="image1">
                <img class="imageimg1" src="https://wayo.cdn.ntruss.com/resized/review/bf0504866d2941c5b5ed77895eba2746.JPEG">
            </div>
            <div class="image1">
                <img  class="imageimg1"src="https://wayo.cdn.ntruss.com/resized/review/194d132e0fb0411f890dae6cb4768b9b.JPEG">
            </div>
            <div class="more-images1">
                <p class="more-imagesp1">+ 442</p>
            </div>
        </div> -->
    </div>
  </div>

  <div class="review2">
    <div class="user-info2">
      <div class="user-image2">
        <img
          class="user-imageimg2"
          src="https://wayo.cdn.ntruss.com/resized/pet/daa7bb0c5b2141a2891e9bf73ced5358.jpg"
        />
      </div>
      <div class="user-details2">
        <p class="user-detailsp2">ê¹€â—¯ì—° ë‹˜ ( ë¹„ìˆ‘ë¯¹ìŠ¤Â·7ì‚´ )</p>
        <div class="user-rating2">
          <div class="stars2">
            <img class="startsimg2" src="/static/images/common/star_1.png" />
            <img class="startsimg2" src="/static/images/common/star_1.png" />
            <img class="startsimg2" src="/static/images/common/star_1.png" />
            <img class="startsimg2" src="/static/images/common/star_1.png" />
            <img class="startsimg2" src="/static/images/common/star_1.png" />
          </div>
          <p>4ì¼ ì „</p>
        </div>
      </div>
    </div>
    <div class="user-review2">
      <p class="user-reviewp2">
        ìš°ë ¤í–ˆë˜ ë¶€ë¶„ì„ ì•„ì‹œê³  ë°±ë™ì´ì— ë§ì¶°ì„œ êµìœ¡ë°©ë²•ì„ ì˜ ì•Œë ¤ì£¼ì‹­ë‹ˆë‹¤
        ê°ì‚¬í•©ë‹ˆë‹¤!
      </p>
    </div>
    <div class="user-tags2">
      <div class="tag2">
        <p>ğŸ¶&nbsp; ë¬¸ì œ í–‰ë™ ì§„ë‹¨ê³¼ ì†”ë£¨ì…˜</p>
      </div>
      <div class="tag2">
        <p class="tagp2">ğŸ  ë°©ë¬¸ êµìœ¡</p>
      </div>
    </div>
  </div>

  <div class="review3">
    <div class="user-info3">
      <div class="user-image3">
        <img
          class="user-imageimg3"
          src="https://wayo.cdn.ntruss.com/resized/pet/5a2fb50a7d35461b9365c3aa0a3acfe1.jpg"
        />
      </div>
      <div class="user-details3">
        <p class="user-detailsp3">ë°•â—¯ì˜ ë‹˜ ( ì˜¤ìŠ¤íŠ¸ë ˆì¼ë¦¬ì•ˆ ì…°í¼ë“œÂ·9ê°œì›” )</p>
        <div class="user-rating3">
          <div class="stars3">
            <img class="starsimg3" src="/static/images/common/star_1.png" />
            <img class="starsimg3" src="/static/images/common/star_1.png" />
            <img class="starsimg3" src="/static/images/common/star_1.png" />
            <img class="starsimg3" src="/static/images/common/star_1.png" />
            <img class="starsimg3" src="/static/images/common/star_1.png" />
          </div>
          <p class="user-ratingp3">6ì¼ ì „</p>
        </div>
      </div>
    </div>
    <div class="user-review3">
      <p class="user-reviewp3">
        í›ˆë ¨ì„ ì—¬ëŸ¬ êµ°ë° ë‹¤ë…€ë´¤ì§€ë§Œ í›ˆë ¨ì‚¬ë‹˜ì˜ êµìœ¡ì´ ì œì¼ íš¨ê³¼ì ì´ì˜€ìŠµë‹ˆë‹¤.
        ë˜í•œ ì œê°€ ë°˜ë ¤ê²¬ì„ í‚¤ìš¸ë•Œ ê°–ê³  ìˆëŠ” ì² í•™ê³¼ ì¼ì¹˜í•˜ì—¬ ë„ˆë¬´
        ë§Œì¡±ìŠ¤ëŸ¬ì› ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤~
      </p>
    </div>
    <div class="user-tags3">
      <div class="tag3">
        <p class="tagp3">ğŸ¶&nbsp; ë¬¸ì œ í–‰ë™ ì§„ë‹¨ê³¼ ì†”ë£¨ì…˜</p>
      </div>
      <div class="ta3g">
        <p>ğŸ  ë°©ë¬¸ êµìœ¡</p>
      </div>
    </div>
  </div>

  <div class="review4">
    <div class="user-info4">
      <div class="user-image4">
        <img
          class="user-imageimg4"
          src="https://wayo.cdn.ntruss.com/resized/pet/32f4e96671ff4f8f9a1d564f4253b810.jpg"
        />
      </div>
      <div class="user-details4">
        <p class="user-detailsp4">ì‹ â—¯í¬ ë‹˜ ( í‘¸ë“¤Â·7ì‚´ )</p>
        <div class="user-rating4">
          <div class="stars4">
            <img class="starsimg4" src="/static/images/common/star_1.png" />
            <img class="starsimg4" src="/static/images/common/star_1.png" />
            <img class="starsimg4" src="/static/images/common/star_1.png" />
            <img class="starsimg4" src="/static/images/common/star_1.png" />
            <img class="starsimg4" src="/static/images/common/star_1.png" />
          </div>
          <p class="user-ratingp4">ì§€ë‚œ ì£¼</p>
        </div>
      </div>
    </div>
    <div class="user-review4">
      <p class="user-reviewp4">
        ì¹œì ˆí•˜ê³  ìì„¸í•˜ê²Œ ê°€ë¥´ì³ì£¼ì…”ì„œ ì¢‹ì•˜ì–´ìš”! ì•„ì´ê°€ ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ì§€ ì•ŠëŠ”
        ë°©í–¥ìœ¼ë¡œ í›ˆë ¨í•˜ëŠ” ë°©ì‹ì„ ì•Œë ¤ì£¼ì…”ì„œ ì¢‹ì•˜ê³ , ë°¥ ì˜ ì•ˆ ë¨¹ëŠ” ê²ƒ ì›ì¸ë„
        ë³´ìë§ˆì ë°”ë¡œ ì•Œì•„ì±„ê³  í•´ê²°í•´ì£¼ì‹  ê²ƒë„ ì‹ ê¸°í–ˆìŠµë‹ˆë‹¤ã…ã… ê°ì‚¬í•©ë‹ˆë‹¤!!
        í•©ê²©ì´ëŠ” ë¨¸ë¦¬ë¥¼ ë„ˆë¬´ ë§ì´ ì¼ëŠ”ì§€ ëë‚˜ê³  ë°”ë¡œ ë»—ì—ˆì–´ìš”ã…‹ã…‹
      </p>
    </div>
    <div class="user-photo4">
      <!-- <img class="user-photoimg4" src="https://wayo.cdn.ntruss.com/resized/review/1dd354fc64db425aa78828ab9d4c08d7.jpg"> -->
    </div>
    <div class="user-tags4">
      <div class="tag4">
        <p class="tagp4">ğŸ¶&nbsp; ë¬¸ì œ í–‰ë™ ì§„ë‹¨ê³¼ ì†”ë£¨ì…˜</p>
      </div>
      <div class="tag4">
        <p class="tagp4">ğŸ  ë°©ë¬¸ êµìœ¡</p>
      </div>
    </div>
    <div class="more-reviews4">
      <p class="more-reviewsp4">+&nbsp;&nbsp; í›„ê¸° ë” ë³´ê¸°</p>
    </div>
  </div>
</template>

<script>
import axios from "axios";

export default {
  data() {
    return {
      product: null,
      idx: this.$route.params.idx, // URL íŒŒë¼ë¯¸í„°ì—ì„œ idx ê°’ì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
    };
  },
  methods: {
    goToReservation() {
    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì„ íƒ ì •ë³´ ì €ì¥
    localStorage.setItem('storeName', this.product.storeName);
    localStorage.setItem('productCeoIdx', this.idx);

    // ì˜ˆì•½ í˜ì´ì§€ë¡œ ë¼ìš°íŒ…, URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— ì„ íƒ ì •ë³´ í¬í•¨
    this.$router.push({
      path: "/orders/create",
      query: {
        storeName: this.product.storeName,
        productCeoIdx: this.idx,
      },
    });
  },

    async loadProductInfo() {
      try {
        const response = await axios.get(
          `http://www.woofwoof.kro.kr/api/productCeo/${this.idx}`
        );
        const data = response.data;
        if (data && data.code === 1000) {
          this.product = {
            ...data.result,
            filenames: data.result.filename
              ? data.result.filename.split(",")
              : [],
          };
        } else {
          console.error("ìƒí’ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        }
      } catch (error) {
        console.error("Error:", error);
      }
    },
    updateProduct() {
      const productId = this.idx; // í˜„ì¬ ì œí’ˆì˜ ID
      window.location.href = `/productCeo/update?idx=${productId}`;
    },
    deleteProduct() {
      if (confirm("ì •ë§ë¡œ ì´ ìƒí’ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        axios
          .delete(`http://www.woofwoof.kro.kr/api/productCeo/deleteCeo?idx=${this.idx}`)
          .then(() => {
            alert("ìƒí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            this.$router.push("/productCeo/list"); // ì˜ˆë¥¼ ë“¤ì–´, ìƒí’ˆ ëª©ë¡ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜
          })
          .catch((error) => {
            console.error("ìƒí’ˆ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
            alert("ìƒí’ˆ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
          });
      }
    },
  },
  created() {
    if (this.idx) {
      this.loadProductInfo();
    }
  },
  computed: {
    productImageSrc() {
      if (this.product && this.product.filenames.length > 0) {
        return this.product.filename;
      } else {
        return "/static/images/salon.jpg";
      }
    },
  },
};
</script>

<style scoped>
.all {
  display: flex;
  background-color: #f7f8fa;
  padding: 10px;
}

.product-container {
  display: flex;
  width: 100%;
}

.product-image img {
  width: 700px; /* ë„ˆë¹„ë¥¼ 700pxë¡œ ì„¤ì • */
  height: 700px; /* ë†’ì´ë¥¼ 700pxë¡œ ì„¤ì • */
  object-fit: contain; /* ì´ë¯¸ì§€ ë¹„ìœ¨ ìœ ì§€ */
  margin: 10px; /* ìƒí•˜ì¢Œìš° ë§ˆì§„ ì¶”ê°€ */
  background-color: #f7f8fa; /* ë°°ê²½ìƒ‰ ì„¤ì •, í•„ìš”ì— ë”°ë¼ ì¡°ì • ê°€ëŠ¥ */
}

.product-info {
  flex: 2;
  padding-top: 30px;
  padding-left: 100px;
  box-sizing: border-box;
}

.product-details {
  flex: 2;
  padding-left: 10px;
  border-left: 2px solid white; /* ì´ë¯¸ì§€ì™€ í…ìŠ¤íŠ¸ ì •ë³´ ì‚¬ì´ì˜ ê²½ê³„ì„  */
}

.storeName {
  font-size: 50px;
  font-weight: 600;
  color: rgb(85, 85, 85);
  margin-bottom: 20px;
  border-bottom: 3px solid #555555;
}

.productName {
  font-size: 30px;
  font-weight: 600;
  color: rgb(85, 85, 85);
  margin-top: 70px;
  margin-bottom: 70px;
}
.phoneNumber {
  font-size: 30px;
  font-weight: 600;
  color: rgb(85, 85, 85);
  margin-top: 70px;
  margin-bottom: 70px;
}
.price {
  font-size: 30px;
  font-weight: 600;
  color: rgb(85, 85, 85);
  margin-top: 70px;
  margin-bottom: 70px;
}
.contents {
  font-size: 30px;
  font-weight: 600;
  color: rgb(85, 85, 85);
  margin-top: 70px;
  margin-bottom: 90px;
}
.product-button {
  display: flex;
  justify-content: flex-end; /* ë²„íŠ¼ë“¤ì„ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì •ë ¬ */
  width: 100%; /* ë¶€ëª¨ ì»¨í…Œì´ë„ˆì˜ ì „ì²´ ë„ˆë¹„ë¥¼ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
  margin-top: 20px; /* ìƒë‹¨ ë§ˆì§„ì„ ì¡°ì •í•˜ì—¬ ë‚´ìš©ê³¼ì˜ ê°„ê²©ì„ ì„¤ì • */
}

button {
  margin-right: 10px;
  font-size: 18px;
  font-weight: 600;
  padding: 5px 10px;
  color: white;
  letter-spacing: 0.2px;
  border: none;
  background-color: #fae14a;
  cursor: pointer;
}

/* ë¦¬ë·° */
.review1 {
  padding-top: 50px;
}

.header1 {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 28px;
  margin-left: 35px;
}

.headerp1 {
  font-size: 20px;
  font-weight: 600;
  color: #333333;
  letter-spacing: -0.2px;
}

.rating1 {
  display: flex;
  align-items: center;
}

.stars1 {
  display: flex;
  justify-content: space-between;
}

.starsimg1 {
  width: 12px;
  height: 12px;
}

.ratingp1 {
  margin-left: 10px;
}

.images1 {
  display: flex;
  flex-direction: row;
  padding-bottom: 38px;
  position: relative;
  justify-content: space-between;
}

.image1 {
  width: 136px;
  height: 136px;
  border-radius: 3px;
  object-fit: cover;
  margin-right: 0;
}

.imageimg1 {
  width: 100%;
  height: 100%;
  border-radius: 3px;
}

.more-images1 {
  width: 136px;
  height: 136px;
  background-color: black;
  opacity: 0.59;
  border-radius: 3px;
  position: absolute;
  top: 0;
  right: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}

.more-imagesp1 {
  font-size: 26px;
  color: white;
}

.review2 {
  padding-top: 45px;
  padding-bottom: 45px;
  border-top: 1px solid #ebebeb;
}

.user-info2 {
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-left: 35px;
}

.user-image2 {
  width: 50px;
  height: 50px;
  border-radius: 25px;
}

.user-imageimg2 {
  width: 100%;
  height: 100%;
  border-radius: 25px;
  object-fit: cover;
}

.user-details2 {
  margin-left: 24px;
}

.user-detailsp2 {
  font-size: 17px;
  font-weight: 500;
  color: #333333;
  letter-spacing: -0.2px;
}

.user-rating2 {
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-top: 4px;
}

.stars2 {
  width: 70px;
  margin-right: 10px;
  display: flex;
  justify-content: space-between;
}

.startsimg2 {
  width: 12px;
  height: 12px;
}

.user-ratingp2 {
  font-size: 15px;
  color: #a0a0a0;
  letter-spacing: -0.2px;
  font-weight: 500;
}

.user-review2 {
  margin-top: 32px;
  margin-left: 35px;
}

.user-reviewp2 {
  font-size: 17px;
  color: #555555;
  line-height: 28px;
}

.user-tags2 {
  margin-top: 24px;
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-left: 35px;
}

.tag2 {
  background-color: #fafafb;
  border-radius: 16px;
  padding: 9px 14px 6px 14px;
  margin-right: 10px;
}

.tagp2 {
  font-size: 17px;
  font-weight: 500;
  line-height: 20px;
  color: #333333;
}

.review3 {
  padding-top: 45px;
  padding-bottom: 45px;
  border-top: 1px solid #ebebeb;
}

.user-info3 {
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-left: 35px;
}

.user-image3 {
  width: 50px;
  height: 50px;
  border-radius: 25px;
}

.user-imageimg3 {
  width: 100%;
  height: 100%;
  border-radius: 25px;
  object-fit: cover;
}

.user-details3 {
  margin-left: 24px;
}

.user-detailsp3 {
  font-size: 17px;
  font-weight: 500;
  color: #333333;
  letter-spacing: -0.2px;
}

.user-rating3 {
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-top: 4px;
}

.stars3 {
  width: 70px;
  margin-right: 10px;
  display: flex;
  justify-content: space-between;
}

.starsimg3 {
  width: 12px;
  height: 12px;
}

.user-ratingp3 {
  font-size: 15px;
  color: #a0a0a0;
  letter-spacing: -0.2px;
  font-weight: 500;
}

.user-review3 {
  margin-top: 32px;
  margin-left: 35px;
}

.user-reviewp3 {
  font-size: 17px;
  color: #555555;
  line-height: 28px;
}

.user-tags3 {
  margin-top: 24px;
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-left: 35px;
}

.tag3 {
  background-color: #fafafb;
  border-radius: 16px;
  padding: 9px 14px 6px 14px;
  margin-right: 10px;
}

.tagp3 {
  font-size: 17px;
  font-weight: 500;
  line-height: 20px;
  color: #333333;
}
.review4 {
  padding-top: 45px;
  padding-bottom: 45px;
  border-top: 1px solid #ebebeb;
}

.user-info4 {
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-left: 35px;
}

.user-image4 {
  width: 50px;
  height: 50px;
  border-radius: 25px;
}

.user-imageimg4 {
  width: 100%;
  height: 100%;
  border-radius: 25px;
  object-fit: cover;
}

.user-details4 {
  margin-left: 24px;
}

.user-detailsp4 {
  font-size: 17px;
  font-weight: 500;
  color: #333333;
  letter-spacing: -0.2px;
}

.user-rating4 {
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-top: 4px;
}

.stars4 {
  width: 70px;
  margin-right: 10px;
  display: flex;
  justify-content: space-between;
}

.starsimg4 {
  width: 12px;
  height: 12px;
}

.user-ratingp4 {
  font-size: 15px;
  color: #a0a0a0;
  letter-spacing: -0.2px;
  font-weight: 500;
}

.user-review4 {
  margin-top: 32px;
  margin-left: 35px;
}

.user-reviewp4 {
  font-size: 17px;
  color: #555555;
  line-height: 28px;
}

.user-photo4 {
  margin-top: 33px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.user-photoimg4 {
  width: 120px;
  height: 120px;
  margin-right: 8px;
  border-radius: 3px;
}

.user-tags4 {
  margin-top: 24px;
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-left: 35px;
}

.tag4 {
  background-color: #fafafb;
  border-radius: 16px;
  padding: 9px 14px 6px 14px;
  margin-right: 10px;
}

.tagp4 {
  font-size: 17px;
  font-weight: 500;
  line-height: 20px;
  color: #333333;
}

.more-reviews4 {
  width: 100%;
  height: 59px;
  background-color: #f7f8fa;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 30px;
  cursor: pointer;
}

.more-reviewsp4 {
  font-size: 18px;
  font-weight: 600;
  color: #777777;
}
</style>
